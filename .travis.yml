language: node_js

sudo: false

node_js:
  - 'stable'

install:
  - npm install

cache:
  directories:
    - node_modules

before_deploy:
  - tsc
  - rm -rf node_modules

deploy:
  - provider: azure_web_apps
    site: jok-test1
    verbose: true
    skip_cleanup: true
  # - provider: heroku
  #   app: jok-graph
  #   api_key: $HEROKU_API_KEY
  #   skip_cleanup: true

notifications:
  - slack: jokio:D3cBL2Pds1LbunOzvWYsMUE1
  - email:
      recipients:
      - ez@jok.io
      on_success: never
      on_failure: always
